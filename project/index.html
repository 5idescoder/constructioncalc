<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MetaTims Construction Calculator</title>
  <script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.162.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.162.0/examples/jsm/"
      }
    }
  </script>
  <link rel="stylesheet" href="css/output.css">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="min-h-screen py-12">
    <div class="app-container">
      <!-- Main Content Table -->
      <div class="main-table">
        <div class="main-content bg-gray-800 rounded-xl shadow-2xl overflow-hidden border border-red-900">
          <div class="flex border-b border-red-900">
            <button class="flex-1 py-4 px-6 text-center border-b-2 border-red-800 text-red-400 tab active" data-tab="home">
              Home
            </button>
            <button class="flex-1 py-4 px-6 text-center text-gray-400 hover:text-gray-300 tab" data-tab="calculator">
              Calculator
            </button>
            <button class="flex-1 py-4 px-6 text-center text-gray-400 hover:text-gray-300 tab" data-tab="preview">
              3D Preview
            </button>
          </div>

          <!-- Home/Tools tab content -->
          <div id="home" class="tab-content active p-6">
            <div class="flex items-center justify-center mb-6">
              <h1 class="text-2xl font-bold text-gray-200">Welcome to MetaTims Construction Calculator</h1>
            </div>
            
            <!-- Just Available Tools Section -->
            <div class="space-y-4">
              <h2 class="text-xl font-semibold text-red-400 mb-4">Available Tools</h2>
              <div class="space-y-4" id="available-tools">
                <!-- Tool cards will be added here -->
              </div>
            </div>
          </div>

          <!-- Calculator tab content -->
          <div id="calculator" class="tab-content p-6">
            <div class="flex items-center justify-center mb-6">
              <h1 class="text-2xl font-bold text-gray-200">MetaTims Construction Calculator</h1>
            </div>
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-300">
                  Length (feet)
                </label>
                <input
                  type="number"
                  id="length"
                  class="mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-gray-200 focus:border-red-800 focus:ring focus:ring-red-800 focus:ring-opacity-50"
                  value="20"
                  max="100"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-300">
                  Width (feet)
                </label>
                <input
                  type="number"
                  id="width"
                  class="mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-gray-200 focus:border-red-800 focus:ring focus:ring-red-800 focus:ring-opacity-50"
                  value="20"
                  max="100"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-300">
                  Height (feet)
                </label>
                <input
                  type="number"
                  id="height"
                  class="mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-gray-200 focus:border-red-800 focus:ring focus:ring-red-800 focus:ring-opacity-50"
                  value="8"
                  max="10"
                />
              </div>

              <div class="mt-6">
                <h3 class="text-lg font-medium text-gray-300 mb-4">Material Lengths</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-300">
                      2×4 Stud/Plate Length (feet)
                    </label>
                    <input
                      type="number"
                      id="studLength"
                      class="mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-gray-200 focus:border-red-800 focus:ring focus:ring-red-800 focus:ring-opacity-50"
                      value="8"
                      step="0.5"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-300">
                      2×6 Beam Length (feet)
                    </label>
                    <input
                      type="number"
                      id="beamLength"
                      class="mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-gray-200 focus:border-red-800 focus:ring focus:ring-red-800 focus:ring-opacity-50"
                      value="8"
                      step="0.5"
                    />
                  </div>
                </div>
              </div>

              <div class="mt-6">
                <h3 class="text-lg font-medium text-gray-300 mb-4">Material Prices ($ per piece)</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-300">
                      2×4 Price (Studs & Plates)
                    </label>
                    <input
                      type="number"
                      id="studPrice"
                      class="mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-gray-200 focus:border-red-800 focus:ring focus:ring-red-800 focus:ring-opacity-50"
                      value="3.98"
                      step="0.01"
                      oninput="document.getElementById('platePrice').value = this.value"
                    />
                  </div>
                  <div class="hidden">
                    <input
                      type="number"
                      id="platePrice"
                      value="3.98"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-300">
                      2×6 Beam Price
                    </label>
                    <input
                      type="number"
                      id="beamPrice"
                      class="mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-gray-200 focus:border-red-800 focus:ring focus:ring-red-800 focus:ring-opacity-50"
                      value="12.98"
                      step="0.01"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-300">
                      Sheetrock Price
                    </label>
                    <input
                      type="number"
                      id="sheetrockPrice"
                      class="mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-gray-200 focus:border-red-800 focus:ring focus:ring-red-800 focus:ring-opacity-50"
                      value="15.98"
                      step="0.01"
                    />
                  </div>
                </div>
              </div>

              <button
                onclick="window.calculateMaterials()"
                class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-800 hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-800 mt-6"
              >
                Calculate Materials
              </button>
              <div id="results" class="mt-6 bg-gray-900 p-6 rounded-lg hidden">
                <h2 class="text-xl font-semibold text-red-400 mb-4">Material Breakdown</h2>
                <ul id="resultsList" class="space-y-4"></ul>
                <div id="totalCost" class="text-xl font-semibold text-red-400 mt-4"></div>
              </div>
            </div>
          </div>

          <!-- Preview tab content -->
          <div id="preview" class="tab-content">
            <div id="preview-container"></div>
          </div>
        </div>
      </div>

      <!-- Tools Table -->
      <div class="tools-table">
        <div class="border-b border-red-900 bg-gray-900/50 p-4">
          <h2 class="text-xl font-semibold text-red-400">Active Tools</h2>
        </div>
        <div class="p-4">
          <div id="global-toolbox" class="space-y-3">
            <!-- Active tools will appear here -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script type="module" src="js/preview.js"></script>
  <script type="module">
    import { initTools } from './js/tools.js';
    import { calculateMaterials } from './js/calculator.js';
    window.calculateMaterials = calculateMaterials;
    document.addEventListener('DOMContentLoaded', initTools);
  </script>
</body>
</html>